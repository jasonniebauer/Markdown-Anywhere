<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="author" content="">
    <meta name="copyright" content="">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no">
    <!--<link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png"/>-->
    <title>DocHub</title>
    <link rel="stylesheet" href="css/litespeed.css"/>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <header style="box-shadow: inset 0 -1px 0 0px rgba(0,0,0,.125);">
      <div id="appBar" class="appbar flex justify-between items-center">
        <p id="appName">DocHub</p>
        <a id="startButton" class="btn btn-primary">Get started</a>
      </div>
      <nav id="navBar" class="hide navbar flex justify-between items-center mx-auto">
        <span id="backToDocs" class="flex items-center" style="color:#3578e5;height: 56px;width: 56px;">
          <i class="fas fa-angle-left" style="margin-left:12px;"></i>
        </span>
        <p id="docTitle" class="flex-auto">DocTitle.md</p>
        <span id="previewIcon" class="preview-icon flex justify-center items-center" style="font-size:20px;color:#3578e5;height: 56px;width: 56px;">
          <i class="far fa-eye"></i>
        </span>
        <span id="cancelPreview" class="hide flex justify-center items-center" style="font-size:20px;color:#3578e5;height: 56px;width: 56px;">
          <i class="far fa-eye-slash"></i>
        </span>
      </nav>
    </header>
    <section id="appContainer" class="flex items-stretch">
      <div id="landing" class="fill p-2" style="background:#f2f2f2;">
        <h1>Landing page</h1>
      </div>
      <div id="documents" class="hide">
        <h1>Documents</h1>
      </div>
      <div id="editor" class="hide editor flex">
        <textarea id="textInput" class="border-none"></textarea>
        <div id="preview" class="md-show preview-container overflow-auto"></div>
      </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
      var textInput = document.getElementById('textInput');
      textInput.value = 
        '\n' +
        '# DocHub\n\n' + 
        'A progressive web app for writing markdown.\n\n' +
        '# Heading 1\n' +
        '## Heading 2\n' +
        '### Heading 3\n' +
        '#### Heading 4\n' +
        '##### Heading 5\n' +
        '###### Heading 6\n\n' +
        'Type `*Italic*` to get *Italic*\n\n' +
        'Type `**Bold**` to get **Bold**\n\n' +
        'Type `[Link](http://a.com)` to get a [Link](http://a.com)\n\n' +
        'Type `![Image](http://url/a.png)` to get ![Image](http://url/a.png)\n\n' +
        'Type `> Blockquote` to get:\n> Blockquote\n\n' +
        '* List\n* List\n* List\n\n' +
        '1. List\n2. List\n3. List\n\n'

      var preview = document.getElementById('preview');

      function updatePreview(){
        preview.innerHTML =  marked(textInput.value);
      }

      updatePreview();

      document.addEventListener('input', function (event) {
        if (event.target.tagName.toLowerCase() == 'textarea') {
          updatePreview();
        }
      });


      // app bar variables
      var appBar = document.getElementById('appBar');
      var startButton = document.getElementById('startButton');

      var navBar = document.getElementById('navBar');
      var backToDocs = document.getElementById('backToDocs');
      var docTitle = document.getElementById('docTitle');
      var previewIcon = document.getElementById('previewIcon');
      var cancelPreview = document.getElementById('cancelPreview');

      // container variables
      var appContainer = document.getElementById('appContainer');
      var landing = document.getElementById('landing');
      var editor = document.getElementById('editor');
      var textInput = document.getElementById('textInput');
      var preview = document.getElementById('preview');


      // window.addEventListener('resize', function(){
      //   var element = document.getElementById('editor');
      //   var elementWidth = window.getComputedStyle(element).width;
      //   elementWidth = elementWidth.slice(0,3);

      //   if(elementWidth >= 832){
      //     preview.className -= 'hide';
      //   } else {
      //     preview.className += 'hide';
      //   }
      // });

      function togglePreview(){
        previewIcon.classList.toggle('hide');
        cancelPreview.classList.toggle('hide');
        textInput.classList.toggle('hide');
        preview.classList.toggle('md-show');
      }

      startButton.addEventListener('click', function(){
        appBar.classList.toggle('hide');
        navBar.classList.toggle('hide');
        landing.classList.toggle('hide');
        editor.classList.toggle('hide');
        textInput.focus();
      });

      backToDocs.addEventListener('click', function(){
        appBar.classList.toggle('hide');
        navBar.classList.toggle('hide');
        landing.classList.toggle('hide');
        editor.classList.toggle('hide');
      });

      previewIcon.addEventListener('click', function() {
        togglePreview();
      });

      cancelPreview.addEventListener('click', function(){
        togglePreview();
      });
    </script>
    <script defer src="https://use.fontawesome.com/releases/v5.6.3/js/all.js" integrity="sha384-EIHISlAOj4zgYieurP0SdoiBYfGJKkgWedPHH4jCzpCXLmzVsw1ouK59MuUtP4a1" crossorigin="anonymous"></script>
  </body>
</html>